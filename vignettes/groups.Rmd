---
title: Groups
output: 
  prettydoc::html_pretty:
    theme: architect
    highlight: vignette
    #toc: yes

vignette: >
  %\VignetteIndexEntry{Groups}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, message=FALSE, warning=FALSE, echo=FALSE, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, echo = FALSE}
library(utDataStoR)
library(prettydoc)
```

```{r echo=FALSE, out.width = "50%", fig.align = "center"}
knitr::include_graphics("groups.jpg")
```

Groups define the ways students are categorized. These groups can be placed in several classifications.

# Demographic Groups
Data in this classification is collected from the student at the time of their application for admission. This data is stored at the student level, in the student table. This data is doesn't change often, if ever. This data can be pulled as of Current, End of Term or Census.

## Gender
Gender is the biological sex on a student's birth certificate. Not Available is used if the code is null. The options are:

- M - Male 
- F - Female
- N - Not Available

## IPEDS Race/Ethnicity
IPEDS Race/Ethnicity is data reporting the student's race and ethnicity where the multiracial students are grouped into one category. There are nine options:

- Hispanic
- American Indian/Alaskan
- Asian
- Black/African American
- Hawaiian/Pacific Islander
- White
- Multiracial
- Non-Resident Alien (for those with visa's)
- Unspecified

## Minority
Minority students are those students who are not white, non-resident alien, or unspecified. The options are:

- Minority
- Non-minority

## Citizenship
Citizenship is the student's relationship to the United States. The options are:

- 1 - US Citizen - An individual who is a citizen of the United States, regardless of how his/her status was acquired.
- 2 - Non-Res Alien-Visa or temp bas - An individual who is not a citizen or national of the United States and who is in this country on a Visa or temporary basis and does not have the right to remain indefinitely.
- 3 - Res Alien-immigrant status - A person who is not a citizen or national of the United States and who is in the United States and has been granted a special immigrant visa or has applied for or been granted refugee status, humanitarian parole, temporary protected status, asylum status, or permanent resident alien status. This category also includes those with Conditional Entrant Parolee, or Cuban-Haitian Entrant status.
- 4 - Non-immigrant Alien 53B-8-106 - A person without lawful immigration status who: a) shall file an affidavit with the institution of higher education stating that the student has filed an application to legalize his immigration status, or will file an application as soon as he is eligible to do so, b) attended high school in the State of Utah for three or more years, c) graduated from a State of Utah high school or received the equivalent of a high school diploma from the State of Utah, and d) registers as an entering student at an institution of higher education not earlier than the fall of the 2002-2003 academic year. See HB144 (53B-8-106).
- 5 - Non-Citizen National of US - A person from America Samoa or the Swain Islands.
- 6 - Deferred Action - Deferred Action for Childhood Arrivals (DACA), a program that provides temporary protection from deportation and work permits to eligible undocumented immigrants.
- 9 - Student curr defined as Other - Student is currently defined as Other. An individual who is not a citizen or national of the United States and is not in the United States (i.e. non-US student taking all courses outside of the US) should be included here.

## International Student
An international student is a student who is from a foreign country (has a citizenship code of Non_Res Alien-Visa) and comes to the US to take classes on a temporary F-1 visa. This is a subset of Non-Resident Alien students (see IPEDS Race/Ethnicity). If the sql output is TRUE then the student is an international student. 

## Age Band
Age is how old a student is today (or on the day of the snapshot) based on their birth date. Reported as a grouping: 

- Less than 18
- 18-24
- 25-34
- 35-44
- 45-59
- 60 plus

## First Generation Student
A first generation student is a student where neither parent nor guardian has received their bachelor's degree. On the application the student is asked if either of their parent(s) or guardian(s) has received a bachelor degree, if they respond no then the student is a first generation student. If they respond yes or if they don't answer then the student is not a first generation student. If the sql output is TRUE then the student is a first generation student.

## Veteran
A veteran is a student who has served in the armed forces or is receiving veteran benefits (includes family members receiving benefits). If the sql output is TRUE then the student is a veteran.

## Student Athlete
A student athlete is a student who was EVER on the official team roster on or after the first scheduled contest or date of NCAA competition. If the sql output is TRUE then the student is an athlete.

## First Admit County
First admit county is the the county listed on the student first application where they were admitted. Students who were not from Utah get grouped into Out of state, in US; or Out of state, out of US.

## First Admit State
First admit state is the the state listed on the students first application where they were admitted. Students who were not in the US get grouped into Foreign State.

## First Admit Country
First admit country is the the country listed on the students first application where they were admitted.

## ACT Composite Score
ACT Composite Score is the student's highest ACT composite score. The Composite score is the average of the four ACT test scores (Math, English, Reading, Science), rounded to the nearest whole number. Starting in Sept. 2025, the composite score is an average of three ACT test scores (Math, English, Reading), rounded to the nearest whole number. If the student has not taken the ACT then this field is null.


# Term Based Groups
Data in this classification can change each semester and is based on information from the system for this current term such as program, student type, etc. This data is stored at the student term level, in the student_term_level table. This data changes often. This data can be pulled as of Current, End of Term or Census.

## Degree Seeking Student
A student is a degree seeking student if the students' primary program leads to a credential. This includes Associate, Bachelor, and Master's students. If the sql output is TRUE then the student is a degree seeking student.

## College
College abbrv/id and desc indicates what college a student belongs to based on the primary program the student has declared. Programs are assigned to a department and departments are assigned to colleges (abbreviation/desc). There are eight options: 

- COB - College of Business
- COE - College of Education
- COA - College of the Arts
- GCO - College of Global and Community Outreach
- COHS - College of Health Sciences
- CHASS - College of Humanities and Social Sciences
- CSET - College of Science, Engineering and Technology
- UCOL - University College

## Department
Department desc indicates what department a student belongs to based on the primary program the student has declared. Programs are assigned to a department and departments are assigned to colleges.

## Program
Program id/desc is the students' declared program of study. Programs are assigned to a department and departments are assigned to colleges. A program code is typically made up of a degree id, and major id and if applicable a concentration id.

## Degree
Degree id/desc is the degree that is tied to a students' primary program of study.

## Major
Major id/desc is the major that is tied to a students' primary program of study.

## Concentration
Concentration id/desc is a specific area of emphasis or specialization in a major chosen by a student. Not all majors have a concentration option, this field may be null.

## Student Level
Student level id/desc is the level of the primary degree a student is pursing. The options are: 

- UG - Undergraduate
- GR - Graduate
- NC - Non Credit

## Class Level
Class level is based on a student's overall cumulative earned credit hours. A student's class level is not the same as their year in school, it is based on credit hours. There can be sophomores in their first semester, as well as freshmen in their third year.

All graduate students are reported as Graduate.
Undergraduate students have four options, the options are: 

- Freshman <30 credit hours
- Sophomore 30-59 credit hours 
- Junior 60-89 credit hours
- Senior 90 or more credit hours 

## Student Type
Student Type is a student's enrollment status or registration status for the term. The options are:

- H -	High School - A student who is taking classes from the institution while still in high school. This code will be given to the student every term they enroll while still in high school.
- F	- Freshman - A student who is attending any institution for the first time at the undergraduate level in a degree seeking program after graduation from high school. Includes students enrolled in the fall term who attended college for the first time in the prior summer term, and students who entered with advanced standing (college credits earned  before graduation from high school (e.g., advanced placement and  concurrent enrollment)). A student will be coded as a freshman only once.
- C -	Continuing Registration - A student who is re-enrolling at the institution after having attended the previous term. Includes a student who attends spring term, stops out summer term, then returns fall term.
- R	- Readmit - A student who has re-enrolled at the institution  after stopping out for at least one term (excluding summer term).
- T -	Transfer - A student entering the reporting institution for the first time but known to have previously attended a post secondary institution at the same level (e.g., undergraduate,  graduate). This includes new students enrolled in the fall term who transferred into the institution the prior summer term. The student may transfer with or without credit. A student will be coded as a transfer only once.
- P	- Personal Interest, Non-Degree - A student who is taking courses without applying for candidacy for a degree or certificate.
- 1	- New Graduate - A student who holds a bachelors or first professional degree, or equivalent, and is taking courses at the post baccalaureate level for the first time. These students may or may not be enrolled in graduate programs. A student will be coded as a new graduate only once.
- 2	- Transfer Graduate - A student entering the reporting institution at the graduate level for the first time but known to have previously attended another post secondary institution at the graduate level. The student may transfer in with or without credit. A student will be coded as a transfer graduate only once.
- 3	- Readmit Graduate -  A student who has re-enrolled at the institution after stopping out for at least one term of graduate coursework (excluding  summer term).
- 5	- Continuing Graduate - A graduate student who is re-enrolling at the institution after having attended a previous term as a graduate student.

## Credit Load
Credit load code/desc is the status of a student's time commitment based on how many credit hours attempted and the student's level for a given semester. The options are: 

- F - Full-time
   - Undergraduate students - 12 or more credit hours
   - Graduate students - 9 or more credit hours
- P - Part-time
   - Undergraduate students - less than 12 credit hours
   - Graduate students - less than 9 credit hours

## Tuition Residency
Tuition Residency code/desc is the official status of student's residence for tuition purposes. The options are:

- 0 - Undeclared
- A - American Indian Tribal Resident
- B - Housebill 102 - 2023
- C - Changed from Non-Resident
- G - Good Neighbor Tuition
- H - Housebill 118/144 Waivers
- M - Military, Out-of-State
- N - Non-Resident of UT
- R - UT Resident
- S - Surcharge for excessive credits

## Global Residency
Global Residency summarizes tuition residency into three categories while also incorporating international status. The options are:

- International
- In-State
- Out-of-State

## High School Student
A High School Student is a student is who is taking a course at Utah Tech University while still attending high school. High school is a subset of Non-degree-seeking. If the sql output is TRUE then the student is a high school student.

## Non-Matriculated
A non-matriculated student is a non-degree-seeking student who is enrolled to per sue personal interests, not a credential. Non-matriculated is a subset of Non-degree-seeking. If the sql output is TRUE then the student is a non-matriculated student.

## Online Program Student
An Online Program Student is a student who is paying online tuition because they are in an online only program (the program can only be completed online). If the sql output is TRUE then the student is an online program student. This data has was not available in the snapshot until Fall 2023 (202340).

## Overall Cumulative GPA Band
Overall Cumulative GPA Band displays a student's Overall (both institutional and transfer) Cumulative (across all semesters) GPA. Best used at End of Term. Reported as a grouping: 

- New Student - (null - no GPA yet)
- 0-1.999
- 2-2.49
- 2.5-2.999
- 3-4.0

## Institutional Term GPA Band
Institutional Term GPA Band displays a student's Institutional Term GPA. Best used at End of Term. Reported as a grouping:

- New Student - (null - no GPA yet)
- 0-1.999
- 2-2.49
- 2.5-2.999
- 3-4.0

## Pell Eligible
A Pell Eligible student is a student who is eligible to receive a Pell grant this term based on their FAFSA. If the sql output is TRUE then the student is Pell Eligible. There is no PELL Eligible snapshot data for Fall 2023 Census, Fall 2023 End of Term, and Spring 202420 Census. 

## Pell Awarded
A Pell Awarded student is a student who has been awarded a Pell grant this term. If the sql output is TRUE then the student is Pell Awarded. There is no Pell Awarded data prior to Spring 2022 Census. 

## Subsidized Loan Awarded
A Subsidized Loan Awarded student is a student who has been awarded a Subsidized Loan this term. If the sql output is TRUE then the student is Subsidized Loan Awarded. There is no Subsidized Loan Awarded snapshot data for Fall 2023 Census, Fall 2023 End of Term, and Spring 202420 Census. There is no Subsidized Loan Awarded data prior to Spring 2022 End of Term. 

## Student Athlete Term
A Student Athlete is a student who was on the official team roster on or after the first scheduled contest or date of NCAA competition that semester. If the sql output is TRUE then the student is an athlete.

## Distance Education All
A Distance Education All student is a student who is enrolled in only distance education courses this term. Distance Education as defined by IPEDS states that courses are considered Distance Education if **ALL** of their instructional portions can be completed remotely. This includes the following instructional methods at UT:

- I - Online/Internet
- R - Interactive Audio/Video
- T - Broadcast live or taped
- V - Remote Virtual

If the sql output is TRUE then the student is a distance education all student. There is no Distance Education All data prior to Fall 2022 End of Term.

## Distance Education Some
A Distance Education Some student is a student who is enrolled in at least one distance education course and at least one face-to-face course this term. Distance Education as defined by IPEDS states that courses are considered Distance Education if **ALL** of their instructional portions can be completed remotely. This includes the following instructional methods at UT:

- I - Online/Internet
- R - Interactive Audio/Video
- T - Broadcast live or taped
- V - Remote Virtual

If the sql output is TRUE then the student is a distance education some student. There is no Distance Education Some data prior to Fall 2022 End of Term.

## Distance Education None
A Distance Education None student is a student who is enrolled in non distance education courses this term. This includes the following instructional methods at UT:

- P - On-Campus/Face-to-Face
- B - Blended/Hybrid
- E - Emporium
- C - Correspondence

If the sql output is TRUE then the student is a distance education none student. There is no Distance Education None data prior to Fall 2022 End of Term.

## SQL for Demographic and Term Based Groups

```sql
`r display_sql_with_comments('headcount', 'headcount_census_groups.sql')`
```


# Course Based Groups
Data in this classification can change each day and is different each semester. It is based on courses the student is enrolled in. This data is stored at the student term section level, in the student_term_section table. This data is changes often. This data can be pulled as of Current, End of Term or Census.

## High School Concurrent Enrollment Student
A High School Concurrent Enrollment student is a high school student enrolled in at least one funded concurrent enrollment class. High School Concurrent Enrollment students are a subset of High School Students. If a high school student isn't a concurrent enrollment student then the student is a High School Student, Other. If the sql output is TRUE then the student is a high school concurrent enrollment student.


## SQL for High School Concurrent Enrollment Student
```sql
--This query will pull current data from the current term (use student_term_level_version to pull snapshot data)
WITH cte AS
           (
               SELECT a.budget_code,
                      b.student_type_code,
                      a.student_id,
                      a.course_id,
                      a.term_id
                 FROM export.student_section a
                          LEFT JOIN export.student_term_level b
                                    ON b.student_id = a.student_id
                                        AND b.term_id = a.term_id
                                        AND b.is_primary_level IS TRUE
                WHERE a.is_enrolled IS TRUE
                  AND a.is_current_term IS TRUE
                ORDER BY a.student_id
           ),
       concurrent_cte AS ( --this query flags student courses that are eligible for concurrent enrollment funds
           SELECT a.student_id,
                  a.term_id,
                  CASE
                      WHEN a.student_type_code = 'H' AND (a.budget_code IN ('BC', 'SF'))
                          THEN TRUE
                      ELSE FALSE
                      END AS cte_concurrent_enrollment
             FROM cte a
       )
SELECT a.student_id,
       a.term_id,
       bool_or(cte_concurrent_enrollment) AS is_concurrent_enrollment
  FROM concurrent_cte a
 GROUP BY a.student_id, a.term_id
```

## Distance Education Status
Distance Education Status determines if a students' courses are Distance Education All, Distance Education Some, or Distance Education None. A distance education course uses one or more types of technology to deliver instruction to students who are separated from the instructor and to support regular and substantive interaction between the students and the instructor synchronously or asynchronously.

## SQL for Distance Education Status

```sql
--This query will pull current data from the current term (use student_term_level_version to pull snapshot data)
SELECT a.student_id,
       a.is_distance_ed_all,
       a.is_distance_ed_some,
       a.is_distance_ed_none
  FROM export.student_term_level a
 WHERE a.is_enrolled IS TRUE
   AND a.is_primary_level IS TRUE
   AND a.is_current_term IS TRUE
 ```

## Online Status
Online Status determines if a students courses are Online All, Online Some, or Online None. An online course is a subset of distance education courses. Online courses are primarily delivered asynchronously; students work at their own pace within the timelines established by the instructor. 

## SQL for Online Status

```sql
--This query will pull current data from the current term (use student_section_version to pull snapshot data)
SELECT student_id,
       instruction_method_code_aggregated,
       instruction_method_code_aggregated !~ '[I]'  AS online_none,
       instruction_method_code_aggregated !~ '[^I]' AS online_all,
       CASE
           WHEN instruction_method_code_aggregated !~ '[^I]' THEN FALSE
           WHEN instruction_method_code_aggregated ~ '[I]+' THEN TRUE
           ELSE FALSE
           END                                      AS online_some,
       academic_year_code
FROM (SELECT a.student_id,
             STRING_AGG(instruction_method_code :: VARCHAR, ''
                        ORDER BY instruction_method_code) AS instruction_method_code_aggregated,
             b.academic_year_code
      FROM export.student_section a
               LEFT JOIN export.term b ON b.term_id = a.term_id
      WHERE is_enrolled
        AND season != 'Summer'
      GROUP BY a.student_id,
               b.academic_year_code) x
   ```

## Student Category
A student's category is based off of their degree seeking status. The options are:

- Degree Seeking
- Non-Matriculated
- High School Concurrent Enrollment Students
- High School Students, Other

## SQL for Student Category
```sql
--This query will pull current data from the current term (use student_term_level_version and student_section_version to pull snapshot data)
WITH cte_degree_seeking AS
         (SELECT a.student_id,
                 a.term_id,
                 a.is_degree_seeking
          FROM export.student_term_level a
          WHERE a.is_enrolled IS TRUE
            AND a.is_primary_level IS TRUE
            AND a.is_current_term IS TRUE
          ORDER BY a.student_id),
     cte_non_matriculated AS
         (SELECT a.student_id,
                 a.term_id,
                 CASE
                     WHEN a.student_type_code = 'P' THEN 'TRUE'
                     ELSE 'FALSE'
                     END AS is_non_matriculated
          FROM export.student_term_level a
          WHERE a.is_enrolled IS TRUE
            AND a.is_primary_level IS TRUE
            AND a.is_current_term IS TRUE
          ORDER BY a.student_id),
     cte_high_school AS
         (SELECT a.student_id,
                 a.term_id,
                 CASE
                     WHEN a.student_type_code = 'H' THEN 'TRUE'
                     ELSE 'FALSE'
                     END AS is_high_school
          FROM export.student_term_level a
          WHERE a.is_enrolled IS TRUE
            AND a.is_primary_level IS TRUE
            AND a.is_current_term IS TRUE
          ORDER BY a.student_id),
     cte_concurrent AS
         (WITH cte AS
                   (SELECT a.budget_code,
                           b.student_type_code,
                           a.student_id,
                           a.course_id,
                           a.term_id
                    FROM export.student_section a
                             LEFT JOIN export.student_term_level b
                                       ON b.student_id = a.student_id
                                           AND b.term_id = a.term_id
                                           AND b.is_primary_level IS TRUE
                    WHERE a.is_enrolled IS TRUE
                      AND a.is_current_term IS TRUE
                    ORDER BY a.student_id),
               concurrent_cte AS ( --this query flags student courses that are eligible for concurrent enrollment funds
                   SELECT a.student_id,
                          a.term_id,
                          CASE
                              WHEN a.student_type_code = 'H' AND (a.budget_code IN ('BC', 'SF'))
                                  THEN TRUE
                              ELSE FALSE
                              END AS cte_concurrent_enrollment
                   FROM cte a)
          SELECT a.student_id,
                 a.term_id,
                 bool_or(cte_concurrent_enrollment) AS is_concurrent_enrollment
          FROM concurrent_cte a
          GROUP BY a.student_id, a.term_id)
SELECT a.student_id,
       a.term_id,
       b.is_degree_seeking,
       c.is_non_matriculated,
       d.is_high_school,
       e.is_concurrent_enrollment,
       CASE WHEN b.is_degree_seeking = 'TRUE' THEN 'degree-seeking'
            WHEN c.is_non_matriculated = 'TRUE' THEN 'non-matriculated'
            WHEN d.is_high_school = 'TRUE' AND e.is_concurrent_enrollment = 'TRUE' THEN 'high_school_concurrent'
            WHEN d.is_high_school = 'TRUE' AND e.is_concurrent_enrollment = 'FALSE' THEN 'high_school_other'
            ELSE 'error'
            END AS student_categories
FROM export.student_term_level a
         LEFT JOIN cte_degree_seeking b
                   ON b.student_id = a.student_id AND b.term_id = a.term_id
         LEFT JOIN cte_non_matriculated c
                   ON c.student_id = a.student_id AND c.term_id = a.term_id
         LEFT JOIN cte_high_school d
                   ON d.student_id = a.student_id AND d.term_id = a.term_id
         LEFT JOIN cte_concurrent e
                   ON e.student_id = a.student_id AND e.term_id = a.term_id
WHERE a.is_enrolled IS TRUE
  AND a.is_primary_level IS TRUE
  AND a.is_current_term IS TRUE
```
